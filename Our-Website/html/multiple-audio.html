<!DOCTYPE HTML>
<html>

<!-- http://devblog.lastrose.com/html5-audio-video-playlist/ -->

<head>
  <meta charset="UTF-8">
  <title>Worship Sets</title>
  <link rel="stylesheet" href="../../common/styles-default.css">
  <link rel="stylesheet" href="../../common/styles.css">

  <style>
    #playlist,audio {background:#666;width:400px;padding:20px;}
    .active a{color:#5DB0E6;text-decoration:none;}
    li a{color:#eeeedd;background:#333;padding:5px;display:block;}
    li a:hover{text-decoration:none;}
  </style>


<!-- ======================================================================= -->
<script>
$(document).ready(function () {
	init(); // initialize this webpage

	function init(){

		var current = 0; // which song to play
		var audio = $('#playing'); // tag:audio id:playing
		var playlist = $('#playlist'); // tag:ul id:playlist
		var tracks = playlist.find('li a'); // all <ul><li><a>link to an mp3
		var len = tracks.length - 1; // number of mp3
		audio[0].volume = .10; // attributes of the first and only audio
		audio[0].play();

        // if click on song, 
		playlist.on('click','a', function(e){
			e.preventDefault();
			link = $(this); // reference to the song
			current = link.parent().index();
			playSong(link, audio[0]); // function playSong is below
		});

        // if song ended, cycle to the next song in playlist
		audio[0].addEventListener('ended',function(e){
			current++;
			if(current == len){
				current = 0;
				link = playlist.find('a')[0];
			}else{
				link = playlist.find('a')[current];  // find <a>  
			}
			playSong($(link),audio[0]);
		});
	}
	function playSong(link, player){
			player.src = link.attr('href'); // src is the full link
            document.write(player.src);
			par = link.parent();
			par.addClass('active').siblings().removeClass('active');
			player.load();
			player.play();
	}
});
</script>
<!-- ======================================================================= -->
</head>
<body>

<hr>

<!-- ======================================================================= -->
<div class=border-lime>

  <h2 class="black">Worship Recordings</h2>

    <ul id="playlist">
        <li class="active">
            <a href="http://www.archive.org/download/bolero_69/Bolero.mp3">
                Ravel Bolero
            </a>
        </li>
        <li>
            <a href="http://www.archive.org/download/MoonlightSonata_755/Beethoven-MoonlightSonata.mp3">
                Moonlight Sonata - Beethoven
            </a>
        </li>
        <li>
            <a href="http://www.archive.org/download/CanonInD_261/CanoninD.mp3">
                Canon in D Pachabel
            </a>
        </li>
        <li>
            <a href="http://www.archive.org/download/PatrikbkarlChamberSymph/PatrikbkarlChamberSymph_vbr_mp3.zip">
                patrikbkarl chamber symph
            </a>
        </li>
    </ul>

  <!-- audio id="playing" preload="auto" tabindex="0" controls="" >
    <source src="http://www.archive.org/download/bolero_69/Bolero.mp3">
    Error playing the audio
  </audio -->

</div>
<!-- *********************************************************************** -->
<hr>
</body>
</html>


